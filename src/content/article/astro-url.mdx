---
isDraft: false
title: "AstroでURLを取得する方法"
description: ""
tags: ["next-js", "google-analytics"]
publishedAt: 2024-12-24T10:00:00Z
thumbnail: "./images/nextjs-14-app-router-google-analytics/thumb.png"
---

AstroでURLを取得する方法を解説します。

<ArticleToc />

## 開発環境のバージョン

当記事で紹介する方法は、以下のバージョンで動作確認を行っています。

<NpmVersions
  versions={[
    { name: "next", version: "14.2.15" },
    { name: "@next/third-parties", version: "14.2.15" },
  ]}
/>

Next.jsはバージョン14系で、App Routerを使用しています。

また、すでにNext.jsでプロジェクトを作成済み、Google Analytics 4のトラッキングIDを取得済みという前提で進めます。

<InfoBox type="success">
  バージョンが異なると当記事で紹介している通りに動作しない可能性があるので、ご注意ください。
</InfoBox>

## Next.jsでGoogle Analytics 4を導入する方法

ここからは、実際のGoogle Analytics 4の導入方法を説明していきます。

1. Next.js公式のパッケージをインストールする
2. layout.jsにGoogle Analyticsのコンポーネントを追加する
3. 環境変数を設定する
